# R scripts

## Create a script

Until now, you have run commands by typing them into the console. One of the benefits of R over programs such as Excel, however, is the ability to save your commands in the form of written. Enter the **script**! A script is simply a text file containing commands for R to execute.

Now create a new script file:

1. Click the **New File** button on the toolbar (leftmost button with a green plus sign) and choose **R Script**, or choose File > New File > R Script
2. A new pane will open above your Console pane. This is called the **Source** pane.
3. Immediately save your file by clicking on the blue floppy disk icon. 
4. Give it a memorably name like **finch analysis**. RStudio will automatically add the **.R** file extension.

## Run code from a script

Up to this point, you have been typing code into the console to run it. This works, but it has two drawback:

- You can make typos
- If you want to run code again, you have to type it again.

From now on, use this new set of steps instead:

1. <span class="text-info"><strong>Copy code from the browser. This reduces typos.</strong></span>
1. <span class="text-info"><strong>Paste into the R script.</strong></span>
1. <span class="text-info"><strong>Run code from the R script</strong></span>

The main caveat is to be careful to copy all code, especially closing parentheses `)` at the end of code chunks.

Now that you have a script, try copying and pasting this code into it. For example:

```{r, eval=FALSE}
sqrt(9)
```

To run the code, place your cursor on the same line as the code as click Run on the Source pane toolbar, then Run Selected Lines. Or just hold down the Command key and press the Return key. This is called a keyboard shortcut, and is written as **Cmd+Return**.

When you run the line of code, RStudio copies it to the Console pane and executes it.

Now that you've tried it, you can delete `sqrt(9)` from your script before you move on.

## R packages

In R, users share code with each other in the form of **packages**, each of which is a bundle of code, data, and other files. While R includes some basic functionality in it's "base" packages, you often need to work with other packages when doing any data analysis.

In this tutorial you will use a group of packages collectively referred to as the **tidyverse**.

Before you can use a package, you need to download and install it. In RStudio Cloud, we have already done this step for you by running `install.packages("tidyverse")` so you can skip this step.

### Load the packages

Below you will see two boxes, one with comments and code, and the next with example console output. The console output is just there to show you what to expect to appear in the console when you run the given code. Console output in this tutorial always appears in a box below the code, and has two pound signs before each line like this: `##`

<p class="text-info">Copy the code in the first box below (including the comments) and paste it into your script.</p>

If you still have the code `sqrt(9)` in your script, feel free to delete it.

```{r, warning=FALSE, message=FALSE}
# load packages -----------------------------------------------------------

# run every time you restart RStudio
library(readxl)     # load readxl, for reading Excel files
library(tidyverse)  # load tidyverse, for working with datasets
```

<p class="text-info">Now run BOTH lines of code</p>

Put your cursor on the first line and press Cmd+Return to run it. The cursor automatically moves to the next line, so you can press Cmd+Return again to run the next line.

You will see a warning and some messages in the Console tab, but those can be safely ignored.

You must run the `library()` each time you start RStudio. That's why it's nice to keep that code at the very top of your script.